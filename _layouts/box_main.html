---
layout: default
---

<style type="text/css">
{% include mapgive-in-a-box/style.css %}

#main {
  min-height: 900px;
}
</style>

<div class='doc-nav cell2 padLeft cf' id='doc-nav-left'>

{% comment %}{% assign post_size = {{site.categories[page.category].size}} %}{% endcomment %}
{% assign post_size = {{site.categories.about.size}} %}

  <ul>
    <li class='doc rounded' style='padding:0px;'>
      <a href="/Mapgive/box/new/" class="title header" style='padding:0px;'>
        <img src="{{site.baseurl}}/assets/img/box_graphic_small.png" alt="MapGive in a box home page" class="img-responsive" style="width:33%;display:inline;">
        MapGive in a Box
      </a>
    </li>
  </ul>

  {% if post_size != 0 %}
    <ul>
    <li class='doc rounded'>
        <a class='title header' href='#about'> 
        <span>About</span>
        </a>
    </li>
    <div class="submenu">
      {% for post in site.categories.about reversed %}
          {% if post.lang == page.lang %}
              {% unless post.hidden %}

                <li class='doc rounded'>
                    <a class='title {% comment %}{% if post.cover %}cover{% endif %}{% endcomment %} ' href="#about#{{ post.title | slugify }}">
                    <span>{{ post.title }}</span>
                    </a>
                </li>
              {% endunless %}
          {% endif %}
      {% endfor %}
    </div>
    </ul>
  {% endif %}


{% assign post_size_cases = {{site.categories.cases.size}} %}

  {% if post_size_cases != 0 %}
    <ul>
    <li class='doc rounded'>
        <a class='title header' href='#cases'>
        <span>Case Studies</span>
        </a>
    </li>
    <div class="submenu">
      {% for post in site.categories.cases reversed %}
          {% if post.lang == page.lang %}
              {% unless post.hidden %}
                <li class='doc rounded'>
                    <a class='title {% if page.url == post.url %}active{% endif %}' href="#cases#{{ post.title | slugify }}">
                    <span>{{ post.title }}</span>
                    </a>
                </li>
              {% endunless %}
          {% endif %}
      {% endfor %}
    </div>
    </ul>
  {% endif %}

{% assign post_size = {{site.categories.resources.size}} %}

  {% if post_size != 0 %}
    <ul>
    <li class='doc rounded'>
        <a class='title header' href='#resources'>
        <span>Resources</span>
        </a>
    </li>
    <div class="submenu">
      {% for post in site.categories.resources reversed %}
          {% if post.lang == page.lang %}
              {% unless post.hidden %}
                <li class='doc rounded'>
                    <a class='title {% if page.url == post.url %}active{% endif %}' href="#resources#{{ post.title | slugify }}">
                    <span>{{ post.title }}</span>
                    </a>
                </li>
              {% endunless %}
          {% endif %}
      {% endfor %}
    </div>
    </ul>
  {% endif %}



<script type="text/javascript">

//need a router for the hashes in the url
//first hash will be for the categories: #about, #cases, and #resources
//2nd hash will be for the page: ex. #determine-the-need

//the hashes will be parsed. the categories will determine the submenu to be opened
//and the page hashtag will load the post content

//This code opens the right tab by reading the url hash.
$( document ).ready(function() {
    console.log('doc ready called');
    console.log('doc loc hash');
    console.log(document.location.hash);
    // Javascript to enable link to tab
    var hash = document.location.hash;


    console.log('try');

    

    hash_page = hash.slice(1).split('#');

    console.log('hash page 1');
    console.log(hash_page[0]);


    //remove active from existing headers
    $('.header').removeClass("active");

    $("a[href='#"+hash_page[0]+"']").closest(".rounded").next().slideUp();

    $("a[href='#"+hash_page[0]+"']").closest(".rounded").next().slideDown();
    $("a[href='#"+hash_page[0]+"']").addClass("active");

    $('.header').not(".active").closest(".rounded").next().slideUp();
    $('.header').not(".active").closest(".rounded").next().removeClass("active");
    //$('.header').not(".active").closest(".rounded").next().slideDown();


    if (hash_page.length > 1) {
      console.log( 'hash_page new: ' );
      console.log( hash_page[1] );

      hash_page = '#' + hash_page[1];

      console.log( 'title_href2' );
      console.log( hash_page );

      $( hash_page+".outer-div" ).show();

      //make page link in menu active
      $("a[href='"+document.location.hash+"']").addClass("active");
    }


});



</script>

<!--code to open and close submenus-->
<script type="text/javascript">

//make header active that has an active link
//$('.title.active').closest('.submenu').addClass("active");

//hide all menus that aren't active
$('.submenu').not('.active').hide();

//if one of the titles is active
if ( $( '.title.active' ).length ) {
  //just hide the other menus
  console.log('we have an active title');
  //console.log($( '.title.active' ));
  console.log($('.title').not('active').closest('.submenu'));

  //if submenu not already active
  if ( !$( '.submenu.active' ).length ) {
    console.log('submenu not active yet');
    //make submenu active
    $('.title.active').closest('.submenu').addClass("active");

    //slide down the submenu
    $('.title.active').closest('.submenu').slideDown();
  }

  //$('.submenu').not('.active').slideUp();

} else {
  //hide all menus
  //$('.header').not(".active").closest(".rounded").next().hide();

  //open the menu with the active title
  console.log('submenu to open');
  console.log($('.title.active').parent().parent());

  //$('.title.active').parent().parent().slideDown();
  //$('.title.active').parent().parent().addClass("active");

}

$('.header').on('click', function(){
  console.log('next');
  console.log($(this).closest(".rounded").next());
  //$(this).closest(".rounded").next().slideUp();

  //if submenu is not visible
  if(!($(this).closest(".rounded").next().is(':visible'))){

    $('.header').removeClass("active");

    $(this).closest(".rounded").next().slideUp();
    $(this).closest(".rounded").next().slideDown();
    $(this).addClass("active");

    $('.header').not(".active").closest(".rounded").next().slideUp();
    $('.header').not(".active").closest(".rounded").next().removeClass("active");
    //$('.header').not(".active").closest(".rounded").next().slideDown();

    $(this).removeClass("active");

  } else {
    $(this).closest(".rounded").next().slideUp();
    $(this).removeClass("active");
  }

});

</script>


<!--   
  <ul style="margin-top:40px;">
      <li class='doc rounded'>
        <a class='title cover'>
          {% if page.otherguides %}
            <span>{{ page.otherguides }}</span>
          {% else %}
            <span>Site Navigation</span>
          {% endif %}
        </a>
      </li>
      
      {% for post in site.posts reversed %}
        {% if post.lang == page.lang %}{% unless post.hidden %}
        {% if post.cover %}{% unless post.category == page.category %}
          <li class='doc rounded'>
            <a class='title' href="{{site.baseurl}}{{ post.url }}">
              <span>{{ post.title }}</span>
            </a>
          </li>
        {% endunless %}{% endif %}
        {% endunless %}{% endif %}
      {% endfor %}
  </ul>
-->


</div>
<div class='doc-main doc cell5 padRight'>
  <h1>{{page.title}}</h1>
  {{content}}
  <!--do for loops and make everything hidden here-->
  <!--the hidden posts can have their images be lazy loads
  <!--when button is clicked, show active post-->



  {% for post in site.categories.about reversed %}
      {% if post.lang == page.lang %}
          {% unless post.hidden %}
            
            <div class="outer-div" id="{{ post.title | slugify }}" style="display: none;">
              <h1>{{post.title}}</h1>
              {{ post.content }}
            </div>

          {% endunless %}
      {% endif %}
  {% endfor %}

  {% for post in site.categories.cases reversed %}
      {% if post.lang == page.lang %}
          {% unless post.hidden %}
            
            <div class="outer-div" id="{{ post.title | slugify }}" style="display: none;">
              <h1>{{post.title}}</h1>
              {{ post.content }}
            </div>

          {% endunless %}
      {% endif %}
  {% endfor %}

  {% for post in site.categories.resources reversed %}
      {% if post.lang == page.lang %}
          {% unless post.hidden %}
            
            <div class="outer-div" id="{{ post.title | slugify }}" style="display: none;">
              <h1>{{post.title}}</h1>
              {{ post.content }}
            </div>

          {% endunless %}
      {% endif %}
  {% endfor %}


</div>

<script type="text/javascript">

//click listeners to show and hide posts

$( ".title" ).on( "click", function() {
  
  title_href = $(this).attr('href');
  console.log( 'showing link href' );
  console.log( title_href );

  $( ".title" ).removeClass("active");
  $(this).addClass("active");

  $( ".outer-div" ).hide();

  //take away first hash 

  title_href = title_href.slice(1).split('#');

  console.log( 'title_href new: ' );
  console.log( title_href[1] );

  title_href2 = '#' + title_href[1];

  console.log( 'title_href2' );
  console.log( title_href2 );

  $( title_href2+".outer-div" ).show();

});

//http://stackoverflow.com/questions/17534661/make-anchor-link-go-some-pixels-above-where-its-linked-to
// The function actually applying the offset
function offsetAnchor() {
    if(location.hash.length !== 0) {
        window.scrollTo(window.scrollX, window.scrollY - 200);
    }
}

// This will capture hash changes while on the page
window.addEventListener("hashchange", offsetAnchor);

// This is here so that when you enter the page with a hash,
// it can provide the offset in that case too. Having a timeout
// seems necessary to allow the browser to jump to the anchor first.
window.setTimeout(offsetAnchor, 1); // The delay of 1 is arbitrary and may not always work right (although it did in my testing).

</script>



<script>
  // loop through the node list to get the innerHTML from each node
  // copy that as the id for the node
  var addId = function(list){
    for (i = 0; i < list.length; i++) {
      element = list[i];
      sectionCopy = element.innerHTML.toLowerCase().replace(/ /g, '-').replace(/([^0-9a-z-])/g,''); //substitute space with dash
      element.id = sectionCopy;
    }
  };

  var allH2 = document.getElementsByTagName('h2');
  var allH3 = document.getElementsByTagName('h3');
  addId(allH2);
  addId(allH3);

  // make the titles linkable
  $('h2[id], h3[id]','.doc').attr('title', 'Link to this section').click(function(e) {
    window.location.hash = $(e.currentTarget).attr('id');
  });

  //select the image containers so the images can be centered, styles in css
  $('img').parent().addClass('has-image');
  
  // make title nav sticky
  
  $(document).ready(function(){
  	var nav = $('.doc-nav'),
      	navTop = nav.offset().top,
      	navHeight = nav.outerHeight(true),
      	footerHeight = $('#footer').outerHeight(true);

  	$(window).scroll(function(e){
    	var scrolled = $(this).scrollTop();
    	var leftToScroll = $(document).height() - scrolled;
    	
    	if (scrolled >= navTop && leftToScroll > (footerHeight + navHeight + 20)) {
    	// if in the middle - nav box is positioned fixed
      		nav.addClass('fixed');
      		//nav.removeClass('bottom');
    	} else if (scrolled < navTop) {
    	// if at the beginning - nav box is positioned at top
      		nav.removeClass('fixed');
      		//nav.removeClass('bottom');
    	} else if (leftToScroll <= (footerHeight + navHeight + 20)) {
    	// if at the end - nav box is positioned at bottom
    	// only if height of viewport is not sufficient to have nav box and footer in it
    		if ((footerHeight + navHeight + 20) > $(window).height()) {
	      		//nav.removeClass('fixed');
    	  		//nav.addClass('bottom');
    	  	}
    	}
  	});
  });

  // get the second url of doc nav and make it the url of the 'proceed' link
  var proceedTo = $('.doc-nav li:nth-child(2) a').attr('href');
  $('a.start').attr('href',proceedTo);

  // Set the min-height of the page dynamically based on height of navigation div
  $('.doc-main').css("min-height", function() {
    return $('#doc-nav-left').height() + 25;
  });
  
</script>
